{% extends 'layout/admin_base.html' %}

{% block title %}
Update User - Register Page
{% endblock %}

{% block component %}
<section class="container">
  <div style="--duration:20s;" class="container-style grid place-items-center mx-auto my-auto"
    id="auth-register-page">
    <div aria-hidden="true" class="absolute inset-0 grid grid-cols-2 -space-x-52 opacity-40 dark:opacity-20">
      <div class="blur-[106px] h-56 bg-gradient-to-br from-primary to-purple-400 dark:from-blue-700"></div>
      <div class="blur-[106px] h-32 bg-gradient-to-r from-cyan-400 to-sky-300 dark:to-indigo-600"></div>
    </div>
    <div style="--duration:50s;"
      class="w-[90vw] bg-slate-950/80 m-auto rounded-xl shadow-lg shadow-black/20 relative grid grid-cols-[1fr_3fr]">
      <div class="h-screen w-full"
        style="background-image: url('{{ shinobu }}'); background-size: cover; background-position: center; background-repeat: no-repeat">
      </div>
      <div class="container mx-auto flex flex-col justify-center p-6">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">
            Update User Information
        </h1>

        <form class="grid grid-cols-3 gap-6" method="POST" action="{% url 'administration:create_user' %}">
          {% csrf_token %}
          <!-- Informaci칩n b치sica -->
          <div class="col-span-2 space-y-4">
            <h2>
              User Information
            </h2>
            <div class="p-3 rounded-md  space-y-4">
              <div>
                <label for="first_name" class="block text-sm font-medium text-gray-700">Nombre</label>
                <input id="first_name" type="text" placeholder="Nombre" name="first_name" value="{{ user.first_name }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>

              <div>
                <label for="last_name" class="block text-sm font-medium text-gray-700">Apellido</label>
                <input id="last_name" type="text" placeholder="Apellido" name="last_name" value="{{ user.last_name }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>

              <div>
                <label for="email" class="block text-sm font-medium text-gray-700">Correo electr칩nico</label>
                <input id="email" type="email" placeholder="ejemplo@correo.com" name="email" value="{{ user.email }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>

              <div>
                <label for="username" class="block text-sm font-medium text-gray-700">Usuario</label>
                <input id="username" type="text" placeholder="Nombre de usuario" name="username" value="{{ user.username }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>
                <div>
                <label for="ci" class="block text-sm font-medium text-gray-700">CI</label>
                <input id="ci" type="text" placeholder="ci" name="ci" value="{{ person.ci }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>

                <div>
                <label for="phone" class="block text-sm font-medium text-gray-700">Numero de telefono</label>
                <input id="phone" type="number" placeholder="+591 ******" name="phone" value="{{ person.phone }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>
                <div>
                <label for="address" class="block text-sm font-medium text-gray-700">Direccion</label>
                <input id="address" type="text" placeholder="" name="address" value="{{ person.address }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>
                <div>
                <label for="birth_date" class="block text-sm font-medium text-gray-700">Fecha de nacimiento</label>
                <input id="birth_date" type="date" placeholder="" name="birth_date" value="{{ person.birth_date }}"
                  class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
              </div>
            </div>

            <!-- Contrase침a y permisos -->
            <h2>
              Password and Permissions
            </h2>
            <div class=" p-3 rounded-md space-y-4">
              <div class="flex space-x-6 flex-wrap gap-x-6">
                  <div class="flex items-center">
                    <input id="is_superuser" type="checkbox" name="is_superuser" checked="{{ user.is_superuser }}"
                      class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500" />
                    <label for="is_superuser" class="ml-2 block text-sm text-gray-700">Is Admin</label>
                  </div>
                  <div class="flex items-center">
                    <input id="is_active" type="checkbox" name="is_active" checked="{{ user.is_active }}"
                      class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500" />
                    <label for="is_active" class="ml-2 block text-sm text-gray-700">Is Active</label>
                  </div>
              </div>

            </div>
              <div class="col-span-1 space-y-4">
            <h2>
              Set Permissions
            </h2>
            <div class=" rounded-md p-1">

                <div class="flex items-center justify-between mb-2">
                  <label for="groups" class="block text-sm font-medium text-gray-700">Grupos</label>
                <p class="border-b border-gray-800 pb-2 flex">
                        <strong class="text-primary block text-sm mb-0.5">Current Groups:</strong>
                        <span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-700/50 text-blue-300">
                            {% for group in user.groups.all %}
                                {{ group.name }}{% if not forloop.last %}, {% endif %}
                            {% empty %}
                                No Groups
                            {% endfor %}
                        </span>
                    </p>
              </div>
              <select id="groups" multiple name="groups"
                class="p-2 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 overflow-y-auto h-32">
                <option>Administradores</option>
                <option>Usuarios</option>
                <option>Invitados</option>
              </select>
            </div>

              <h2>
              Set Role
            </h2>
            <div class=" rounded-md p-1">
              <div class="flex items-center justify-between mb-2">
                  <label for="role_group" class="text-sm font-medium text-gray-700">Roles</label>
                <p class="border-b border-gray-800 pb-2 flex">
                        <strong class="text-primary block text-sm mb-0.5">Current Rol:</strong>
                        <span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-700/50 text-blue-300">
                            {{ user.role|capfirst }}
                        </span>
                    </p>
              </div>
              <select id="role_group" name="role_group"
                class="p-2 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 overflow-y-auto">
                <option>Reader</option>
                <option>Author</option>
                <option>Librarian</option>
              </select>
            </div>
          </div>
          </div>

          <!-- Permisos -->
          <!-- Botones -->
          <div class="col-span-1 md:col-span-2 flex justify-end space-x-3 mt-6">
            <button type="submit"
              class="btn px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Guardar</button>
              <a href="{% url 'administration:dashboard' %}"
                 class="btn px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700">
                  Cancel
              </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock %}